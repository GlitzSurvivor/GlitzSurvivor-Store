<!DOCTYPE html>
<html>
<head>
<title>GlitzSurvivor Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f2f2f2;}
header{background:#ff6600;color:white;padding:15px;text-align:center;}
.section{display:none;padding:20px;}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;}
.card{background:white;padding:15px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.1);text-align:center;}
.card img{width:100%;border-radius:8px;}
button{padding:7px 12px;border:none;border-radius:5px;cursor:pointer;margin-top:5px;}
.orange{background:#ff6600;color:white;}
.green{background:green;color:white;}
input{padding:8px;margin:5px;width:90%;}
.cart-item{display:flex;justify-content:space-between;margin-bottom:10px;}
.center{display:flex;justify-content:center;align-items:center;height:100vh;}
.box{background:white;padding:25px;border-radius:10px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,0.2);}
#menuBtn{position:fixed;right:20px;bottom:20px;background:#ff6600;color:white;border:none;padding:15px;border-radius:50%;font-size:18px;cursor:pointer;}
#bottomMenu{position:fixed;bottom:-250px;left:0;width:100%;background:white;box-shadow:0 -4px 10px rgba(0,0,0,0.2);transition:0.3s;padding:20px;}
#bottomMenu button{width:100%;margin:5px 0;}
</style>
</head>
<body>

<header><h2>GlitzSurvivor Store</h2></header>

<button id="menuBtn" onclick="toggleMenu()">â˜°</button>

<div id="bottomMenu">
<button onclick="showSection('store')">Store</button>
<button onclick="showSection('cart')">Cart (<span id="cartCount">0</span>)</button>
<button id="adminBtn" onclick="showSection('admin')">Admin</button>
<button onclick="logout()">Logout</button>
</div>

<!-- LOGIN -->
<div id="login" class="center">
<div class="box">
<h3>Login</h3>
<input type="text" id="loginUser" placeholder="Username"><br>
<input type="password" id="loginPass" placeholder="Password"><br>
<button class="orange" onclick="login()">Login</button>
<p id="msg"></p>
</div>
</div>

<!-- STORE -->
<div id="store" class="section">
<h3>Products</h3>
<div class="products" id="productList"></div>
</div>

<!-- CART -->
<div id="cart" class="section">
<h3>Your Cart</h3>
<div id="cartItems"></div>
<h3>Total: NPR <span id="totalPrice">0</span></h3>
<button class="green" onclick="checkoutWhatsApp()">Checkout via WhatsApp</button>
</div>

<!-- ADMIN -->
<div id="admin" class="section">
<h3>Admin Panel</h3>
<input type="text" id="pname" placeholder="Product Name"><br>
<input type="number" id="pprice" placeholder="Price"><br>
<input type="file" id="pimagefile" accept="image/*"><br>
<button class="orange" onclick="addProduct()">Add Product</button>
</div>

<script>

let menuOpen=false;
function toggleMenu(){
let menu=document.getElementById("bottomMenu");
menu.style.bottom = menuOpen ? "-250px" : "0";
menuOpen=!menuOpen;
}

let products=[];
let cart=[];

function login(){
let u=document.getElementById("loginUser").value;
let p=document.getElementById("loginPass").value;

if(u==="Nicolus" && p==="nicolus098@"){
localStorage.setItem("role","admin");
startApp();
}else{
document.getElementById("msg").innerText="Wrong Username or Password";
}
}

function startApp(){
document.getElementById("login").style.display="none";
showSection("store");
}

function logout(){
localStorage.clear();
location.reload();
}

function showSection(id){
document.querySelectorAll(".section").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
toggleMenu();
}

function displayProducts(){
let list=document.getElementById("productList");
list.innerHTML="";
products.forEach((p,i)=>{
list.innerHTML+=`
<div class="card">
<img src="${p.image}">
<h4>${p.name}</h4>
<p>NPR ${p.price}</p>
<button class="green" onclick="addToCart(${i})">Add</button>
<button class="orange" onclick="deleteProduct(${i})">Delete</button>
</div>`;
});
}

function addProduct(){
if(localStorage.getItem("role")!=="admin"){alert("Only Admin");return;}
let name=pname.value;
let price=pprice.value;
let file=pimagefile.files[0];
if(!name||!price||!file){alert("Fill all fields");return;}

let reader=new FileReader();
reader.onload=function(e){
products.push({name,price:Number(price),image:e.target.result});
displayProducts();
}
reader.readAsDataURL(file);
}

function deleteProduct(i){
products.splice(i,1);
displayProducts();
}

function addToCart(i){
let item=products[i];
let exist=cart.find(x=>x.name===item.name);
if(exist){exist.qty++;}
else{cart.push({...item,qty:1});}
updateCart();
}

function updateCart(){
let cartDiv=document.getElementById("cartItems");
let totalAmount=0;
cartDiv.innerHTML="";

cart.forEach((item,i)=>{
totalAmount+=item.price*item.qty;
cartDiv.innerHTML+=`
<div class="cart-item">
${item.name} x ${item.qty}
<div>
<button onclick="changeQty(${i},1)">+</button>
<button onclick="changeQty(${i},-1)">-</button>
</div>
</div>`;
});

document.getElementById("totalPrice").innerText=totalAmount;
document.getElementById("cartCount").innerText=cart.length;
}

function changeQty(i,c){
cart[i].qty+=c;
if(cart[i].qty<=0) cart.splice(i,1);
updateCart();
}

function checkoutWhatsApp(){
if(cart.length===0){alert("Cart empty");return;}

let message="New Order:%0A%0A";
cart.forEach(item=>{
message+=`${item.name} x ${item.qty} = NPR ${item.price*item.qty}%0A`;
});

let totalAmount=cart.reduce((a,b)=>a+b.price*b.qty,0);
message+=`%0ATotal: NPR ${totalAmount}`;

window.open(`https://wa.me/9767797783?text=${message}`,"_blank");

cart=[];
updateCart();
showSection("store");
}

</script>

</body>
</html>
